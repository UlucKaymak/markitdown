        <div className={`border-b px-4 py-2 flex items-center justify-center gap-1 z-30 transition-colors ${theme === 'dark' ? 'bg-[#181825] border-[#313244]' : 'bg-[#e6e9ef] border-[#bac2de]'}`}>
          <button onClick={() => insertText('**', '**')} className="p-2 hover:bg-slate-500/10 rounded text-slate-500" title="Bold (Cmd+B)"><Bold size={18} /></button>
          <button onClick={() => insertText('_', '_')} className="p-2 hover:bg-slate-500/10 rounded text-slate-500" title="Italic (Cmd+I)"><Italic size={18} /></button>
          <div className="w-px h-5 bg-slate-500/10 mx-1"></div>
          <button onClick={() => insertText('# ')} className="p-2 hover:bg-slate-500/10 rounded text-slate-500 font-bold text-xs uppercase" title="H1 (Cmd+1)">H1</button>
          <button onClick={() => insertText('## ')} className="p-2 hover:bg-slate-500/10 rounded text-slate-500 font-bold text-xs uppercase" title="H2 (Cmd+2)">H2</button>
          <button onClick={() => insertText('### ')} className="p-2 hover:bg-slate-500/10 rounded text-slate-500 font-bold text-xs uppercase" title="H3 (Cmd+3)">H3</button>
          <div className="w-px h-5 bg-slate-500/10 mx-1"></div>
          <button onClick={() => insertText('- ')} className="p-2 hover:bg-slate-500/10 rounded text-slate-500" title="List"><List size={18} /></button>
          <button onClick={() => insertText('`', '`')} className="p-2 hover:bg-slate-500/10 rounded text-slate-500" title="Code"><Code size={18} /></button>
          <button onClick={() => insertText('> ')} className="p-2 hover:bg-slate-500/10 rounded text-slate-500" title="Quote"><Quote size={18} /></button>
          <button onClick={() => insertText('[', '](url)')} className="p-2 hover:bg-slate-500/10 rounded text-slate-500" title="Link (Cmd+K)"><LinkIcon size={18} /></button>
          <button onClick={() => insertText('![', '](url)')} className="p-2 hover:bg-slate-500/10 rounded text-slate-500" title="Image (Cmd+Shift+I)"><ImageIcon size={18} /></button>
          <button onClick={() => insertText('    ')} className="p-2 hover:bg-slate-500/10 rounded text-slate-500" title="Tab"><Indent size={18} /></button>
          <div className="w-px h-5 bg-slate-500/10 mx-2"></div>
          <div className={`flex p-1 rounded-lg ${theme === 'dark' ? 'bg-[#313244]' : 'bg-[#dce0e8]'}`}>
             {[
               { id: 'edit', icon: <Edit3 size={14} />, title: 'Edit' },
               { id: 'split', icon: <Columns2 size={14} />, title: 'Split' },
               { id: 'sync', icon: <LinkIcon size={14} />, title: 'Sync' },
               { id: 'preview', icon: <Eye size={14} />, title: 'Preview' }
             ].map(m => (
               <button key={m.id} onClick={() => setViewMode(m.id)} className={`px-2 py-1 rounded transition-all ${viewMode === m.id ? (theme === 'dark' ? 'bg-[#45475a] text-white' : 'bg-white shadow-sm ' + (theme === 'dark' ? currentColors.text : currentColors.lightText)) : 'text-slate-400 hover:text-slate-600'}`} title={m.title}>{m.icon}</button>
             ))}
          </div>
        </div>